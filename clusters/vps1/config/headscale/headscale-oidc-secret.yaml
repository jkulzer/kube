---
apiVersion: secrets.esg.jkulzer.dev/v1alpha1
kind: Secret
metadata:
  name: headscale-oidc-secret
  namespace: headscale
spec:
  secret:
    name: headscale-oidc-secret
    namespace: headscale
  keys:
    - key: HEADSCALE_OIDC_TOKEN
      templateString: "{{ TOKEN }}"
    - key: HEADSCALE_OIDC_TOKEN_HASHED
      templateString: "{{ TOKEN.hashed }}"
    - key: HEADSCALE_OIDC_ID
      templateString: "{{ ID }}"
  generators:
    - name: TOKEN
      type: authelia-hash
      length: 64
    - name: ID
      type: string
      length: 64
