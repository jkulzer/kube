alertmanager:
  enabled: true
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - alertmanager.kube.home
    annotations:
      nginx.ingress.kubernetes.io/auth-response-headers: "Authorization"
      nginx.ingress.kubernetes.io/auth-signin: "https://oauth.kube.home/oauth2/start?rd=https://$host$uri"
      nginx.ingress.kubernetes.io/auth-url: "https://oauth.kube.home/oauth2/auth"

kubeStateMetrics:
  enabled: true

nodeExporter:
  enabled: true
  hostNetwork: true

server:
  enabled: true
  retention: "7d"
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - prometheus.kube.home
    annotations:
      nginx.ingress.kubernetes.io/auth-response-headers: Authorization
      nginx.ingress.kubernetes.io/auth-signin: https://oauth.kube.home/oauth2/start?rd=https://$host$uri
      nginx.ingress.kubernetes.io/auth-url: https://oauth.kube.home/oauth2/auth

      # alertmanagerFiles:
      # alertmanager.yml:
      # global:
ruleFiles:
  groups:
    - name: Instances
      rules:
        - alert: InstanceDown
          expr: up == 0
          for: 5m
          labels:
            severity: page
          annotations:
            description: '{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes.'
            summary: 'Instance {{ $labels.instance }} down'

configmapReload:
  prometheus:
    enabled: true
    extraConfigmapMounts:
      - name: prometheus-rules
        mountPath: /etc/config/rules
        configMap: prometheus-rules
        readOnly: true

