---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: grafana-prometheus-datasource
spec:
  instanceSelector:
    matchLabels:
      dashboard: main-grafana
  datasource:
      name: main-prometheus
      type: prometheus
      access: proxy
      url: http://kube-prometheus-stack-prometheus.prometheus.svc.cluster.local:9090
      uid: "main-prometheus"
      isDefault: true
      editable: true
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: grafana-loki-datasource
spec:
  instanceSelector:
    matchLabels:
      dashboard: main-grafana
  datasource:
      name: Loki
      type: loki
      url: http://loki.loki.svc.cluster.local:3100
      isDefault: false
      editable: true
      jsonData:
        'connection.url': "http://loki.loki.svc.cluster.local:3100"
